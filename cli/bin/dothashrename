#!/bin/bash

# dothashrename - rename files with their sha1sum
#
# Synopsis
#   dothashrename file...
dothashrename() {
    local filepath; for filepath in "$@"; do
        if [[ -d $filepath ]]; then continue; fi

        local dirpath=$(dirname "$filepath")
        local fileext=$(echo "$filepath" | awk -F . '{print $NF}')
        local hash=$(sha1sum "$filepath" | cut -d' ' -f1)

        mv "$filepath" "$dirpath/$hash.$fileext"
    done
}

dothashrename "$@"
