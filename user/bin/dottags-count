#!/usr/bin/env python3

import pathlib, argparse, collections

def count_tags(paths):
    counter = collections.Counter()
    for path in paths:
        path = pathlib.Path(path)
        if tags := next((s for s in path.suffixes if s.startswith('.+')), ''):
            counter.update(tags[2:].split('+'))

    for k, v in reversed(counter.most_common()):
        print(k, v)

if __name__ == '__main__':
    parser = argparse.ArgumentParser(description = 'Count distinct tags for the \
        specified files. Expected filename format: title[.[+tag ...]][.suffix ...]')
    parser.add_argument('paths', nargs = '+')
    args = parser.parse_args()
    count_tags(args.paths)
