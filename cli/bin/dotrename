#!/bin/bash

# dotrename - rename files with their sha1sum to provide a (hopefully) unique
# filename and preseve file extensions.
#
# Synopsis
#   dotrename file...
dotrename() {
    local filepath; for filepath in "$@"; do
        if [[ -d $filepath ]]; then continue; fi
        local dirpath=$(dirname "$filepath")
        local ext=${filepath#*.}
        local hash=$(sha1sum "$filepath" | cut -d' ' -f1)
        mv "$filepath" "$dirpath/$hash.$ext"
    done
}

dotrename "$@"
